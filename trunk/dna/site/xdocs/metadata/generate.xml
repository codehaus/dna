<?xml version="1.0"?>

<document>
    <properties>
        <title>Generating Descriptors</title>
        <author email="peter at apache.org">Peter Donald</author>
    </properties>
    <body>
        <section name="Generating Descriptors">
            <p>
                DNA uses the MetaClass toolkit to generate metadata
                descriptors. The developer should thus familiarize
                themselves with the MetaClass toolkit. The DNA tools
                extends the base MetaClass toolkit so that specific
                dna tags are recognized, validated, populated with
                default values and types resolved. The following ant
                snippet can be used to generate DNA metadata descriptors.
            </p>
            <p>
                NOTE: There is one limitation when using the MetaClass
                generator. The source code must have fully-qualified
                imports. The MetaClass tool may not be able to resolve
                names of classes if they are not fully qualified. This
                is particularly important when specifying type fields
                of dependency and service tags.
            </p>
            <source><![CDATA[
<!-- define the custom task -->
<taskdef name="metaclassGen"
    classname="org.realityforge.metaclass.tools.tasks.GenerateClassDescriptorsTask">
    <classpath>
        <pathelement location="spice-metaclass-1.0-rc2.jar"/>
        <pathelement location="qdox-1.3.jar"/>
    </classpath>
</taskdef>

<metaclassGen destDir="target/classes">
    <interceptor
        name="org.jcontainer.dna.tools.metaclass.DNAAttributeInterceptor">
        <classpath>
            <pathelement location="dna-tools-1.1.jar"/>
        </classpath>
    </interceptor>
    <fileset dir="src/java">
        <include name="**/*.java"/>
    </fileset>
</metaclassGen>
            ]]></source>
        </section>
    </body>
</document>
